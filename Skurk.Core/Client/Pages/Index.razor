@page "/"
@inherits FluxorComponent
@inject IDispatcher _dispatcher
@inject IState<HandleTimeState> _handleTimeState

<PageTitle>Index</PageTitle>

<h1>Hello, world! Current date is @_handleTimeState.Value.Date</h1>

Welcome to your new app.

<SurveyPrompt Title="How is Blazor working for you?" />

@code {
    protected override async Task OnInitializedAsync()
    {
        //var res = await _client.Send<Guid>(new CreateOrderCommand
        //    {
        //        Title = "Bread",
        //        Description = "And a bunch of butter",
        //    });

        _dispatcher.Dispatch(new SetDateAction(new GetWeekQuery
            {
                Date = DateOnly.FromDateTime(DateTime.Now)
            }));

        await base.OnInitializedAsync();
    }
}
